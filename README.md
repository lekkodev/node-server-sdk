# Lekko Node Server SDK
The Lekko Server SDK for Node.js

## Getting Started

### Installation
You can install `@lekko/node-server-sdk` using NPM or Yarn.

`@lekko/node-server-sdk` depends on source code generated by Buf which is hosted on their NPM registry. Prior to adding the Lekko SDK, configure your package manager to use Buf's NPM registry for `@buf` scoped packages.

> **Note**
> 
> Due to the dependency on Buf's source code generation, we currently do not support installing with Yarn versions older than v2 (a.k.a. [Yarn Classic](https://yarnpkg.com/getting-started/migration)). Please refer to Buf's docs [here](https://buf.build/docs/bsr/remote-packages/npm/#other-package-managers) for more information.

#### NPM
The following command updates your `.npmrc` file.
```
npm config set @buf:registry https://buf.build/gen/npm/v1
```

#### Yarn
You must edit your [`.yarnrc.yml`](https://yarnpkg.com/configuration/yarnrc) file to include the following scope:

```yaml
npmScopes:
  buf:
    npmRegistryServer: https://buf.build/gen/npm/v1
```

Then, you can add the package to your project by running `npm install @lekko/node-server-sdk` or `yarn add @lekko/node-server-sdk`.

### Initializing a Lekko client in Sidecar provider mode
```javascript
const client = await initSidecarClient({
    hostname: "http://localhost:50051",
    repositoryOwner: "<REPOSITORY_OWNER>",
    repositoryName: "<REPOSITORY_NAME>",
});

const stringFeature = await client.getStringFeature("my_namespace", "my_feature", new lekko.ClientContext().setString("my_context_key", "my_context_value"));
```
### Initializing a Lekko client in API provider mode
```javascript
const client = await lekko.initAPIClient({
      apiKey: "<API_KEY>",
      repositoryOwner: "<REPOSITORY_OWNER>",
      repositoryName: "<REPOSITORY_NAME>",
})

const boolFeature = await client.getBoolFeature("default", "example", new lekko.ClientContext().setString("my_context_key", "my_context_value"));
```

## Example
See: https://github.com/lekkodev/node-server-sdk/tree/main/example
